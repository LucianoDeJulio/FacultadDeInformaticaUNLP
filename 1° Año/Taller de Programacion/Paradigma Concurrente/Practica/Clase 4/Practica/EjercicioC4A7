programa Ejercicio3-1

areas
  area1  : AreaP(20,20,20,20)
  area2  : AreaP(21,21,21,21)
  area3  : AreaP(22,22,22,22)
  area4  : AreaP(23,23,23,23)
  aread  : AreaPC(25,25,25,25)
  areaJ  : AreaP(19,19,19,19)
  

robots 
  robot tipo1
  variables
    seguir : boolean
    flores : numero
    av : numero
    ca : numero
    id : numero
  comenzar
    RecibirMensaje(id,robotJ)
    flores := 0
    av := PosAv
    ca := PosCa
    seguir := F
    mientras (seguir = F)
      RecibirMensaje(seguir,robotJ)
      si(seguir = F)
        BloquearEsquina(25,25)
        Pos(25,25)
        si(HayFlorEnLaEsquina)
          tomarFlor
          flores := flores + 1
        sino
          seguir := V
        Pos(av,ca)
        LiberarEsquina(25,25)
      EnviarMensaje(seguir, robotJ)
    Informar(flores)
  fin
  
  robot tipoJefe
  variables
    seguir: boolean
    id: numero
  comenzar
    seguir := F
    EnviarMensaje(1,robot1)
    EnviarMensaje(2,robot2)
    EnviarMensaje(3,robot3)
    EnviarMensaje(4,robot4)
    mientras(seguir = F)
      Random(id,1,4)
      si(id = 1)
        EnviarMensaje(seguir,robot1)
        RecibirMensaje(seguir,robot1)
      sino
        si(id = 2)
          EnviarMensaje(seguir,robot2)
          RecibirMensaje(seguir,robot2)
        sino
          si(id = 3)
            EnviarMensaje(seguir,robot3)
            RecibirMensaje(seguir,robot3)
          sino 
            EnviarMensaje(seguir,robot4)
            RecibirMensaje(seguir,robot4)
    EnviarMensaje(F,robot1)
    EnviarMensaje(F,robot2)
    EnviarMensaje(F,robot3)
    EnviarMensaje(F,robot4)
  fin 
  
variables 
  robot1: tipo1
  robot2: tipo1
  robot3: tipo1
  robot4: tipo1
  robotJ: tipoJefe
  
comenzar 
  AsignarArea(robot1,area1)
  AsignarArea(robot2,area2)
  AsignarArea(robot3,area3)
  AsignarArea(robot4,area4)
  AsignarArea(robot1,aread)
  AsignarArea(robot2,aread)
  AsignarArea(robot3,aread)
  AsignarArea(robot4,aread)
  AsignarArea(robotJ,areaJ)
  Iniciar(robot1, 20, 20)
  Iniciar(robot2, 21, 21) 
  Iniciar(robot3, 22, 22)
  Iniciar(robot4, 23, 23)
  Iniciar(robotJ, 19, 19)
fin
