programa ejercicio-hb
procesos
  proceso juntarFlores(ES flores:numero)
  comenzar
    mientras(HayFlorEnLaEsquina)
      tomarFlor
      flores:=flores+1
  fin
areas
  areaRobot1:AreaP(3,1,3,29)
  areaRobot2:AreaP(5,1,5,29)
  areaRobot3:AreaP(7,1,7,29)
  areaRobot4:AreaP(9,1,9,29)
  areaRobots:AreaPC(3,30,15,45)
  areaJefe: AreaP(1,1,1,1)
  areaDeposito:AreaPC(35,50,35,50)
robots
  robot tipo1
  variables
    p:numero
    flores:numero
    termine:boolean
    av,ca:numero
    iden:numero
    ok:boolean
  comenzar
    RecibirMensaje(iden,j)
    flores:=0
    mientras(PosCa<30)
      Random(p,1,5)
      repetir p
        juntarFlores(flores)
        mover
    EnviarMensaje(termine,j)
    RecibirMensaje(ok,j)
    av:=PosAv
    ca:=PosCa
    mientras(HayFlorEnLaBolsa)
      BloquearEsquina(35,50)
      Pos(35,50)
      depositarFlor
      Pos(av,ca)
      LiberarEsquina(35,50)
    EnviarMensaje(iden,j)          
  fin
  robot jefe
  variables
    iden:numero
    termine:boolean
    ok:boolean
    ganador:numero
    perdedores:numero
  comenzar
    ok:=V
    EnviarMensaje(1,r1)
    EnviarMensaje(2,r2)
    EnviarMensaje(3,r3)
    EnviarMensaje(4,r4)
    repetir 4
      RecibirMensaje(termine,*)
    EnviarMensaje(ok,r1)
    EnviarMensaje(ok,r2)
    EnviarMensaje(ok,r3)
    EnviarMensaje(ok,r4)
    RecibirMensaje(ganador,*)
    Informar(ganador)
    repetir 3
      RecibirMensaje(perdedores,*)
  fin
variables
  r1:tipo1
  r2:tipo1
  r3:tipo1
  r4:tipo1
  j:jefe
comenzar
  AsignarArea(r1,areaRobots)
  AsignarArea(r2,areaRobots)
  AsignarArea(r3,areaRobots)
  AsignarArea(r4,areaRobots)
  AsignarArea(r1,areaRobot1)
  AsignarArea(r2,areaRobot2)
  AsignarArea(r3,areaRobot3)
  AsignarArea(r4,areaRobot4)
  AsignarArea(j,areaJefe)
  AsignarArea(r1,areaDeposito)
  AsignarArea(r2,areaDeposito)
  AsignarArea(r3,areaDeposito)
  AsignarArea(r4,areaDeposito)
  Iniciar(r1,3,1)
  Iniciar(r2,5,1)
  Iniciar(r3,7,1)
  Iniciar(r4,9,1)
  Iniciar(j,1,1)
fin

